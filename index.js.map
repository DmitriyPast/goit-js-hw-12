{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// Для організації коду використовуй модульність та синтаксис export/import.\nimport axios from 'axios';\n\n// У файлі pixabay-api.js зберігай функції для виконання HTTP-запитів:\n\n// getImagesByQuery(query). Ця функція повинна приймати один параметр query (пошукове слово, яке є рядком), здійснювати HTTP-запит і повертати значення властивості data з отриманої відповіді.\nexport default async function getImagesByQuery(query, page = 1) {\n  return await axios.get('https://pixabay.com/api/', {\n    params: {\n      key: '50866310-f6e992bbe1b9ca34c705df120',\n      q: query,\n      page: page,\n      per_page: 15,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    },\n  });\n}\n// export default function getImagesByQuery(query) {\n//   return axios.get('https://pixabay.com/api/', {\n//     params: {\n//       key: '50866310-f6e992bbe1b9ca34c705df120',\n//       q: query,\n//       image_type: 'photo',\n//       orientation: 'horizontal',\n//       safesearch: true,\n//     },\n//   });\n// }\n","// У файлі render-functions.js створи екземпляр SimpleLightbox для роботи з модальним вікном та зберігай функції для відображення елементів інтерфейсу:\n// Описаний в документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів <-- Жахлива підказка\n// import 'simplelightbox/dist/simple-lightbox.min.css'; <-- I HATE this\n\nconst slb = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  // captionDelay: 250,\n});\n\nconst gallery = document.querySelector('ul.gallery');\n// createGallery(images). Ця функція повинна приймати масив images, створювати HTML-розмітку для галереї, додавати її в контейнер галереї та викликати метод екземпляра SimpleLightbox refresh(). Нічого не повертає.\nexport function createGallery(images) {\n  // clearGallery();\n  hideLoader();\n  // console.log(gallery);\n\n  gallery.insertAdjacentHTML(\n    'beforeend',\n    images\n      .map(\n        ({\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) => `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n      <img\n        class=\"gallery-image\"\n        src=\"${webformatURL}\"\n        data-source=\"${largeImageURL}\"\n        alt=\"${tags}\"\n      />\n    </a>\n      <ul class=\"image-info\">\n        <li><h4>Likes</h4><p>${likes}</p></li>\n        <li><h4>Views</h4><p>${views}</p></li>\n        <li><h4>Comments</h4><p>${comments}</p></li>\n        <li><h4>Downloads</h4><p>${downloads}</p></li>\n      </ul>\n  </li>`\n      )\n      .join('')\n  );\n\n  slb.refresh();\n}\n// gallery.insertAdjacentHTML(\n//   'afterbegin',\n//   images\n//     .map(\n//       ({ preview, original, description }) => `<li class=\"gallery-item\">\n//   <a class=\"gallery-link\" href=\"${original}\">\n//     <img\n//       class=\"gallery-image\"\n//       src=\"${preview}\"\n//       data-source=\"${original}\"\n//       alt=\"${description}\"\n//     />\n//     fuck\n//     <span>1</span>\n//     <span>2</span>\n//     <span>3</span>\n//     <span>4</span>\n//   </a>\n// </li>`\n//     )\n//     .join('')\n// );\n\n// clearGallery(). Ця функція нічого не приймає та повинна очищати вміст контейнера галереї. Нічого не повертає.\nexport const clearGallery = () => (gallery.innerHTML = '');\n\nconst loader = document.querySelector('span.loader');\n// showLoader(). Ця функція нічого не приймає, повинна додавати клас для відображення лоадера. Нічого не повертає.\nexport const showLoader = () => loader.classList.remove('hidden');\n// hideLoader(). Ця функція нічого не приймає, повинна прибирати клас для відображення лоадера. Нічого не повертає.\nexport const hideLoader = () => loader.classList.add('hidden');\n\nconst loadMore = document.querySelector('button.load-more');\n// showLoadMoreButton(). Ця функція нічого не приймає, повинна додавати клас для відображення кнопки Load more. Нічого не повертає.\nexport const showLoadMoreButton = () => loadMore.classList.remove('hidden');\n\n// hideLoadMoreButton(). Ця функція нічого не приймає, повинна прибирати клас для відображення кнопки Load more. Нічого не повертає.\nexport const hideLoadMoreButton = () => loadMore.classList.add('hidden');\n","// У файлі main.js напиши всю логіку роботи додатка. Виклики нотифікацій iziToast, усі перевірки на довжину масиву в отриманій відповіді робимо саме в цьому файлі. Імпортуй в нього функції із файлів pixabay-api.js та render-functions.js та викликай їх у відповідний момент.\n// логіку прокручування сторінки (scroll) робимо саме в цьому файлі. Імпортуй в нього функції із файлів pixabay-api.js та render-functions.js та викликай їх у відповідний момент.\nimport fetchData from './js/pixabay-api';\nimport * as render from './js/render-functions';\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('form.form');\nlet page = 1;\nlet searchQuery = '';\n\nform.addEventListener('submit', search => {\n  search.preventDefault();\n  page = 1;\n  // console.log(search.target.elements[0].value);\n  if (search.target.elements[0].value.trim()) {\n    searchQuery = search.target.elements[0].value.trim();\n    render.clearGallery();\n    updatePage();\n    // fetchData(search.target.elements[0].value)\n    //   .then(res => {\n    //     // console.log(res);\n    //     render.hideLoader();\n    //     render.createGallery(res.data.hits);\n    //     if (!res.data.total)\n    //       throw new Error(\n    //         'Sorry, there are no images matching your search query. Please try again!'\n    //       );\n    //   })\n    //   .catch(err => {\n    //     // console.log(err);\n    //     iziToast.error({\n    //       // title: 'Error',\n    //       message: String(err),\n    //       position: 'topRight',\n    //     });\n    //   });\n  } else\n    iziToast.error({\n      message: 'Введіть пошуковий запит.',\n      position: 'topRight',\n    });\n});\n\nconst loadMoreBtn = document.querySelector('button.load-more');\nloadMoreBtn.addEventListener('click', () => {\n  // console.log(loadMoreBtn);\n  render.hideLoadMoreButton();\n  updatePage().then(() => {\n    const galleryItem = document.querySelector('li.gallery-item');\n    // console.log(galleryItem.getBoundingClientRect().height * 2);//400\n    // window.scrollBy(0, 400);\n    window.scrollBy({\n      top: galleryItem.getBoundingClientRect().height * 2,\n      behavior: 'smooth',\n    });\n  });\n  // render.showLoadMoreButton();\n});\n\nasync function updatePage() {\n  render.showLoader();\n\n  try {\n    const res = await fetchData(searchQuery, page++),\n      {\n        data: { hits, total, totalHits },\n      } = res;\n\n    // const {\n    //   res,\n    //   res: {\n    //     data: { hits, total, totalHits },\n    //   },\n    // } = { res: await fetchData(search.target.elements[0].value) };\n\n    // console.log(res);\n    if (Math.ceil(total / 15) >= page) render.showLoadMoreButton();\n    else\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n\n    render.createGallery(res.data.hits);\n    if (!res.data.total)\n      throw new Error(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n  } catch (err) {\n    console.log(err);\n    // console.log(res, res.data.hits);\n    iziToast.error({\n      message: String(err),\n      position: 'topRight',\n    });\n  }\n\n  render.hideLoader();\n}\n"],"names":["getImagesByQuery","query","page","axios","slb","SimpleLightbox","gallery","createGallery","images","hideLoader","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","loader","showLoader","loadMore","showLoadMoreButton","hideLoadMoreButton","form","searchQuery","search","render.clearGallery","updatePage","iziToast","loadMoreBtn","render.hideLoadMoreButton","galleryItem","render.showLoader","res","fetchData","hits","total","totalHits","render.showLoadMoreButton","render.createGallery","err","render.hideLoader"],"mappings":"owBAMe,eAAeA,EAAiBC,EAAOC,EAAO,EAAG,CAC9D,OAAO,MAAMC,EAAM,IAAI,2BAA4B,CACjD,OAAQ,CACN,IAAK,qCACL,EAAGF,EACH,KAAMC,EACN,SAAU,GACV,WAAY,QACZ,YAAa,aACb,WAAY,EACb,CACL,CAAG,CACH,CCZA,MAAME,EAAM,IAAIC,EAAe,aAAc,CAC3C,aAAc,KAEhB,CAAC,EAEKC,EAAU,SAAS,cAAc,YAAY,EAE5C,SAASC,EAAcC,EAAQ,CAEpCC,IAGAH,EAAQ,mBACN,YACAE,EACG,IACC,CAAC,CACC,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACV,IAAc;AAAA,oCACsBL,CAAa;AAAA;AAAA;AAAA,eAGlCD,CAAY;AAAA,uBACJC,CAAa;AAAA,eACrBC,CAAI;AAAA;AAAA;AAAA;AAAA,+BAIYC,CAAK;AAAA,+BACLC,CAAK;AAAA,kCACFC,CAAQ;AAAA,mCACPC,CAAS;AAAA;AAAA,QAGrC,EACA,KAAK,EAAE,CACd,EAEEZ,EAAI,QAAO,CACb,CAyBO,MAAMa,EAAe,IAAOX,EAAQ,UAAY,GAEjDY,EAAS,SAAS,cAAc,aAAa,EAEtCC,EAAa,IAAMD,EAAO,UAAU,OAAO,QAAQ,EAEnDT,EAAa,IAAMS,EAAO,UAAU,IAAI,QAAQ,EAEvDE,EAAW,SAAS,cAAc,kBAAkB,EAE7CC,EAAqB,IAAMD,EAAS,UAAU,OAAO,QAAQ,EAG7DE,EAAqB,IAAMF,EAAS,UAAU,IAAI,QAAQ,EChFjEG,EAAO,SAAS,cAAc,WAAW,EAC/C,IAAIrB,EAAO,EACPsB,EAAc,GAElBD,EAAK,iBAAiB,SAAUE,GAAU,CACxCA,EAAO,eAAc,EACrBvB,EAAO,EAEHuB,EAAO,OAAO,SAAS,CAAC,EAAE,MAAM,QAClCD,EAAcC,EAAO,OAAO,SAAS,CAAC,EAAE,MAAM,OAC9CC,IACAC,KAoBAC,EAAS,MAAM,CACb,QAAS,2BACT,SAAU,UAChB,CAAK,CACL,CAAC,EAED,MAAMC,EAAc,SAAS,cAAc,kBAAkB,EAC7DA,EAAY,iBAAiB,QAAS,IAAM,CAE1CC,IACAH,EAAU,EAAG,KAAK,IAAM,CACtB,MAAMI,EAAc,SAAS,cAAc,iBAAiB,EAG5D,OAAO,SAAS,CACd,IAAKA,EAAY,sBAAuB,EAAC,OAAS,EAClD,SAAU,QAChB,CAAK,CACL,CAAG,CAEH,CAAC,EAED,eAAeJ,GAAa,CAC1BK,IAEA,GAAI,CACF,MAAMC,EAAM,MAAMC,EAAUV,EAAatB,GAAM,EAC7C,CACE,KAAM,CAAE,KAAAiC,EAAM,MAAAC,EAAO,UAAAC,CAAW,CACjC,EAAGJ,EAkBN,GARI,KAAK,KAAKG,EAAQ,EAAE,GAAKlC,EAAMoC,IAEjCV,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UAClB,CAAO,EAEHW,EAAqBN,EAAI,KAAK,IAAI,EAC9B,CAACA,EAAI,KAAK,MACZ,MAAM,IAAI,MACR,0EACR,CACG,OAAQO,EAAK,CACZ,QAAQ,IAAIA,CAAG,EAEfZ,EAAS,MAAM,CACb,QAAS,OAAOY,CAAG,EACnB,SAAU,UAChB,CAAK,CACF,CAEDC,GACF"}