{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// Для організації коду використовуй модульність та синтаксис export/import.\nimport axios from 'axios';\n\n// У файлі pixabay-api.js зберігай функції для виконання HTTP-запитів:\n\n// getImagesByQuery(query). Ця функція повинна приймати один параметр query (пошукове слово, яке є рядком), здійснювати HTTP-запит і повертати значення властивості data з отриманої відповіді.\nexport default async function getImagesByQuery(query, page = 1) {\n  return (\n    await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: '50866310-f6e992bbe1b9ca34c705df120',\n        q: query,\n        page: page,\n        per_page: 15,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n      },\n    })\n  ).data;\n}\n// export default function getImagesByQuery(query) {\n//   return axios.get('https://pixabay.com/api/', {\n//     params: {\n//       key: '50866310-f6e992bbe1b9ca34c705df120',\n//       q: query,\n//       image_type: 'photo',\n//       orientation: 'horizontal',\n//       safesearch: true,\n//     },\n//   });\n// }\n","// У файлі render-functions.js створи екземпляр SimpleLightbox для роботи з модальним вікном та зберігай функції для відображення елементів інтерфейсу:\n// Описаний в документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів <-- Жахлива підказка\n// import 'simplelightbox/dist/simple-lightbox.min.css'; <-- I HATE this\n\nconst slb = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  // captionDelay: 250,\n});\n\nconst gallery = document.querySelector('ul.gallery');\n// createGallery(images). Ця функція повинна приймати масив images, створювати HTML-розмітку для галереї, додавати її в контейнер галереї та викликати метод екземпляра SimpleLightbox refresh(). Нічого не повертає.\nexport function createGallery(images) {\n  // clearGallery();\n  // hideLoader();\n  // console.log(gallery);\n\n  gallery.insertAdjacentHTML(\n    'beforeend',\n    images\n      .map(\n        ({\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) => `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n      <img\n        class=\"gallery-image\"\n        src=\"${webformatURL}\"\n        data-source=\"${largeImageURL}\"\n        alt=\"${tags}\"\n      />\n    </a>\n      <ul class=\"image-info\">\n        <li><h4>Likes</h4><p>${likes}</p></li>\n        <li><h4>Views</h4><p>${views}</p></li>\n        <li><h4>Comments</h4><p>${comments}</p></li>\n        <li><h4>Downloads</h4><p>${downloads}</p></li>\n      </ul>\n  </li>`\n      )\n      .join('')\n  );\n\n  slb.refresh();\n}\n\n// clearGallery(). Ця функція нічого не приймає та повинна очищати вміст контейнера галереї. Нічого не повертає.\nexport const clearGallery = () => (gallery.innerHTML = '');\n\nconst loader = document.querySelector('span.loader');\n// showLoader(). Ця функція нічого не приймає, повинна додавати клас для відображення лоадера. Нічого не повертає.\nexport const showLoader = () => loader.classList.remove('hidden');\n// hideLoader(). Ця функція нічого не приймає, повинна прибирати клас для відображення лоадера. Нічого не повертає.\nexport const hideLoader = () => loader.classList.add('hidden');\n\nconst loadMore = document.querySelector('button.load-more');\n// showLoadMoreButton(). Ця функція нічого не приймає, повинна додавати клас для відображення кнопки Load more. Нічого не повертає.\nexport const showLoadMoreButton = () => loadMore.classList.remove('hidden');\n\n// hideLoadMoreButton(). Ця функція нічого не приймає, повинна прибирати клас для відображення кнопки Load more. Нічого не повертає.\nexport const hideLoadMoreButton = () => loadMore.classList.add('hidden');\n","// У файлі main.js напиши всю логіку роботи додатка. Виклики нотифікацій iziToast, усі перевірки на довжину масиву в отриманій відповіді робимо саме в цьому файлі. Імпортуй в нього функції із файлів pixabay-api.js та render-functions.js та викликай їх у відповідний момент.\n// логіку прокручування сторінки (scroll) робимо саме в цьому файлі. Імпортуй в нього функції із файлів pixabay-api.js та render-functions.js та викликай їх у відповідний момент.\nimport fetchData from './js/pixabay-api';\nimport * as render from './js/render-functions';\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('form.form');\nlet page = 1;\nlet searchQuery = '';\nlet totalPages = 0;\n\nform.addEventListener('submit', search => {\n  search.preventDefault();\n  page = 1;\n  totalPages = 0;\n  // console.log(search.target.elements[0].value);\n  searchQuery = search.target.elements[0].value.trim();\n  if (searchQuery) {\n    render.clearGallery();\n\n    updatePage();\n  } else\n    return iziToast.error({\n      message: 'Enter search query.',\n      position: 'topRight',\n    });\n});\n\nconst loadMoreBtn = document.querySelector('button.load-more');\nloadMoreBtn.addEventListener('click', () => {\n  // console.log(loadMoreBtn);\n  render.hideLoadMoreButton();\n  updatePage().then(() => {\n    const galleryItem = document.querySelector('li.gallery-item');\n    // console.log(galleryItem.getBoundingClientRect().height * 2);//400\n    // window.scrollBy(0, 400);\n    window.scrollBy({\n      top: galleryItem.getBoundingClientRect().height * 2,\n      behavior: 'smooth',\n    });\n  });\n  // render.showLoadMoreButton();\n});\n\nasync function updatePage() {\n  render.showLoader();\n\n  try {\n    const data = await fetchData(searchQuery, page);\n    totalPages = Math.ceil(data.totalHits / 15);\n\n    // console.log(data);\n    if (!data.total)\n      throw new Error(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n    else render.createGallery(data.hits);\n\n    if (totalPages > page) page++ && render.showLoadMoreButton();\n    else\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n  } catch (err) {\n    // console.log(err);\n    // console.log(res, res.data.hits);\n    iziToast.error({\n      message: String(err),\n      position: 'topRight',\n    });\n  }\n\n  render.hideLoader();\n}\n"],"names":["getImagesByQuery","query","page","axios","slb","SimpleLightbox","gallery","createGallery","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","loader","showLoader","hideLoader","loadMore","showLoadMoreButton","hideLoadMoreButton","form","searchQuery","totalPages","search","render.clearGallery","updatePage","iziToast","loadMoreBtn","render.hideLoadMoreButton","galleryItem","render.showLoader","data","fetchData","render.createGallery","render.showLoadMoreButton","err","render.hideLoader"],"mappings":"owBAMe,eAAeA,EAAiBC,EAAOC,EAAO,EAAG,CAC9D,OACE,MAAMC,EAAM,IAAI,2BAA4B,CAC1C,OAAQ,CACN,IAAK,qCACL,EAAGF,EACH,KAAMC,EACN,SAAU,GACV,WAAY,QACZ,YAAa,aACb,WAAY,EACb,CACP,CAAK,GACD,IACJ,CCdA,MAAME,EAAM,IAAIC,EAAe,aAAc,CAC3C,aAAc,KAEhB,CAAC,EAEKC,EAAU,SAAS,cAAc,YAAY,EAE5C,SAASC,EAAcC,EAAQ,CAKpCF,EAAQ,mBACN,YACAE,EACG,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACV,IAAc;AAAA,oCACsBL,CAAa;AAAA;AAAA;AAAA,eAGlCD,CAAY;AAAA,uBACJC,CAAa;AAAA,eACrBC,CAAI;AAAA;AAAA;AAAA;AAAA,+BAIYC,CAAK;AAAA,+BACLC,CAAK;AAAA,kCACFC,CAAQ;AAAA,mCACPC,CAAS;AAAA;AAAA,QAGrC,EACA,KAAK,EAAE,CACd,EAEEX,EAAI,QAAO,CACb,CAGO,MAAMY,EAAe,IAAOV,EAAQ,UAAY,GAEjDW,EAAS,SAAS,cAAc,aAAa,EAEtCC,EAAa,IAAMD,EAAO,UAAU,OAAO,QAAQ,EAEnDE,EAAa,IAAMF,EAAO,UAAU,IAAI,QAAQ,EAEvDG,EAAW,SAAS,cAAc,kBAAkB,EAE7CC,EAAqB,IAAMD,EAAS,UAAU,OAAO,QAAQ,EAG7DE,EAAqB,IAAMF,EAAS,UAAU,IAAI,QAAQ,EC1DjEG,EAAO,SAAS,cAAc,WAAW,EAC/C,IAAIrB,EAAO,EACPsB,EAAc,GACdC,EAAa,EAEjBF,EAAK,iBAAiB,SAAUG,GAAU,CAMxC,GALAA,EAAO,eAAc,EACrBxB,EAAO,EACPuB,EAAa,EAEbD,EAAcE,EAAO,OAAO,SAAS,CAAC,EAAE,MAAM,OAC1CF,EACFG,IAEAC,QAEA,QAAOC,EAAS,MAAM,CACpB,QAAS,sBACT,SAAU,UAChB,CAAK,CACL,CAAC,EAED,MAAMC,EAAc,SAAS,cAAc,kBAAkB,EAC7DA,EAAY,iBAAiB,QAAS,IAAM,CAE1CC,IACAH,EAAU,EAAG,KAAK,IAAM,CACtB,MAAMI,EAAc,SAAS,cAAc,iBAAiB,EAG5D,OAAO,SAAS,CACd,IAAKA,EAAY,sBAAuB,EAAC,OAAS,EAClD,SAAU,QAChB,CAAK,CACL,CAAG,CAEH,CAAC,EAED,eAAeJ,GAAa,CAC1BK,IAEA,GAAI,CACF,MAAMC,EAAO,MAAMC,EAAUX,EAAatB,CAAI,EAI9C,GAHAuB,EAAa,KAAK,KAAKS,EAAK,UAAY,EAAE,EAGrCA,EAAK,MAILE,EAAqBF,EAAK,IAAI,MAHjC,OAAM,IAAI,MACR,0EACR,EAGQT,EAAavB,EAAMA,KAAUmC,EAAyB,EAExDR,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UAClB,CAAO,CACJ,OAAQS,EAAK,CAGZT,EAAS,MAAM,CACb,QAAS,OAAOS,CAAG,EACnB,SAAU,UAChB,CAAK,CACF,CAEDC,GACF"}